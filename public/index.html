<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset='utf-8'>
	<meta name='viewport' content='width=device-width,initial-scale=1'>

	<title>Svelte app</title>

	<link rel='icon' type='image/png' href='/favicon.png'>
	<link rel='stylesheet' href='/global.css'>
	<link rel='stylesheet' href='/build/bundle.css'>
	<link rel='manifest' href='./manifest.json'>

	<script defer src='/build/bundle.js'></script>
</head>

<body>

	<script>
		if ('serviceWorker' in navigator) {
  			navigator.serviceWorker.register('./service-worker.js').then(function(reg) {
    			// Registrierung erfolgreich
    			console.log('Registrierung erfolgreich.');
  			}).catch(function(error) {
    			// Registrierung fehlgeschlagen
    			console.log('Registrierung fehlgeschlagen mit ' + error);
  			});
		};

		const messageChannel = new MessageChannel();
		
		navigator.serviceWorker.controller.postMessage({type: 'INIT_PORT'}, [
			messageChannel.port2,
		])

		messageChannel.port1.onmessage = (evt) => {
			console.log(evt.data.payload);
		}
	</script>
</body>
</html>
